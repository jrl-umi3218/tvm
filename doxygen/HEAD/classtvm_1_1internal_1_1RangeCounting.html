<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TVM: tvm::internal::RangeCounting Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="tvmdoxystyle.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TVM
   &#160;<span id="projectnumber">0.9.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classtvm_1_1internal_1_1RangeCounting.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classtvm_1_1internal_1_1RangeCounting-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">tvm::internal::RangeCounting Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="RangeCounting_8h_source.html">tvm/internal/RangeCounting.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtvm_1_1internal_1_1RangeCounting_1_1Limit.html">Limit</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a06a6885e4aa3f80584eb0e5001bfc068"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtvm_1_1internal_1_1RangeCounting.html#a06a6885e4aa3f80584eb0e5001bfc068">add</a> (const <a class="el" href="classtvm_1_1Range.html">Range</a> &amp;r)</td></tr>
<tr class="separator:a06a6885e4aa3f80584eb0e5001bfc068"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05d848e40a72c09d639fe31343196d29"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtvm_1_1internal_1_1RangeCounting.html#a05d848e40a72c09d639fe31343196d29">remove</a> (const <a class="el" href="classtvm_1_1Range.html">Range</a> &amp;r)</td></tr>
<tr class="separator:a05d848e40a72c09d639fe31343196d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e4f2ae8e723757a980b02f223f527fd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtvm_1_1internal_1_1RangeCounting.html#a2e4f2ae8e723757a980b02f223f527fd">empty</a> () const</td></tr>
<tr class="separator:a2e4f2ae8e723757a980b02f223f527fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae978b641e3bbae6db61c9833bad26740"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; <a class="el" href="classtvm_1_1Range.html">Range</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtvm_1_1internal_1_1RangeCounting.html#ae978b641e3bbae6db61c9833bad26740">ranges</a> (bool splitOncountDiff=false) const</td></tr>
<tr class="separator:ae978b641e3bbae6db61c9833bad26740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38699fdf2fb4141560f3fab8ecbfa126"><td class="memItemLeft" align="right" valign="top">const std::list&lt; <a class="el" href="structtvm_1_1internal_1_1RangeCounting_1_1Limit.html">Limit</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtvm_1_1internal_1_1RangeCounting.html#a38699fdf2fb4141560f3fab8ecbfa126">limits</a> () const</td></tr>
<tr class="separator:a38699fdf2fb4141560f3fab8ecbfa126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dcf5c16cfd4fba8c0228b4ce3c5fcb3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtvm_1_1internal_1_1RangeCounting.html#a3dcf5c16cfd4fba8c0228b4ce3c5fcb3">maxCount</a> () const</td></tr>
<tr class="separator:a3dcf5c16cfd4fba8c0228b4ce3c5fcb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Keep track of the union and (set) subtraction of integer ranges, accounting for the number of times a number was added. For example adding the set {1,2,3,4} (represented by Range(1,4)) and the set {3,4,5,6} (Range(3,4)) will result in a single range, Range(1,6). But internally, it is known that 3 and 4 appeared twice so that removing {2,3,4} (Range(2,3)) will result in a set {1,3,4,5,6}, i.e. the ranges Range(1,1) and Range(3,4).</p>
<p>This class is mostly meant as a utility for tvm::interal::VariableCountingVector. The idea is that <a class="el" href="classtvm_1_1VariableVector.html">tvm::VariableVector</a> is not keeping track of how many time a part of a variable has been added or removed, and has limitations when it comes to adding or removing subvariable. This class can be used on the ranges of subvariables within their supervariable to keep track of the parts present after all the add and remove.</p>
<p>Internally, the ranges are represented by their limits, following the idea in <a href="https://stackoverflow.com/a/32869470/11611648">https://stackoverflow.com/a/32869470/11611648</a>, e.g. Range(1,4) = {1,2,3,4} is represented by {(1,+), (5,-)} where the lower limit (opening, denoted by +) is included and the upper limit (closing, denoted by -) is excluded. A list of such limits is kept as a representation of the current state. The number of appearances of an integer is encoded by the number of + and - appearing to reach that number from the start of this list. For example, if the list is {(1,+), (3,+), (5,-), (6,+), (7,-), (7,-), (9,+), (10,-)}, all number up to 0 don't appear, 1 and appear once, 3 and 4 appear twice, 5 appears once, 6 appears twice, 7 and 8 don't appear, 9 appears once and all numbers from 10 don't appear. The resulting range representation is { Range(1,7), Range(9,1) }. Compared to the above link, we add also the notion of cut (denoted by | ), that is useful to keep track of the fact that two ranges were stitched together. For example adding {1,2} (Range(1,2)) and {3,4} (Range(3,2)) results in {1,2,3,4} (Range(1,4)), but is represented internally by {(1,+), (3,|), (5,-)}. The following rules are enforced for the internal representation: (1) limits appears in lexicographic order with + &lt; | &lt; - (2) (i,|) can only appear once for a given i (3) the sequence (i,+), (i,-) is replaced by (i,|) (4) the sequence (i,+), (i,|), (i,-) is replaced by (i,|) (5) the representation starts with (i,+) and finish with (j,-) i&lt;j (6) cuts can't appear at depth 0 </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a06a6885e4aa3f80584eb0e5001bfc068"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06a6885e4aa3f80584eb0e5001bfc068">&#9670;&nbsp;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tvm::internal::RangeCounting::add </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtvm_1_1Range.html">Range</a> &amp;&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a range to the counting. Return true if this changes the output of <code>ranges(false)</code> (it always changes the output of <code>range(true)</code> ). </p>

</div>
</div>
<a id="a2e4f2ae8e723757a980b02f223f527fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e4f2ae8e723757a980b02f223f527fd">&#9670;&nbsp;</a></span>empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tvm::internal::RangeCounting::empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a38699fdf2fb4141560f3fab8ecbfa126"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38699fdf2fb4141560f3fab8ecbfa126">&#9670;&nbsp;</a></span>limits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::list&lt;<a class="el" href="structtvm_1_1internal_1_1RangeCounting_1_1Limit.html">Limit</a>&gt;&amp; tvm::internal::RangeCounting::limits </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the underlying representation as a list of limits. </p>

</div>
</div>
<a id="a3dcf5c16cfd4fba8c0228b4ce3c5fcb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dcf5c16cfd4fba8c0228b4ce3c5fcb3">&#9670;&nbsp;</a></span>maxCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tvm::internal::RangeCounting::maxCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum number of appearances of a number. </p>

</div>
</div>
<a id="ae978b641e3bbae6db61c9833bad26740"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae978b641e3bbae6db61c9833bad26740">&#9670;&nbsp;</a></span>ranges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;<a class="el" href="classtvm_1_1Range.html">Range</a>&gt;&amp; tvm::internal::RangeCounting::ranges </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>splitOncountDiff</em> = <code>false</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get a representation of number appearing as a list of ranges.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">splitOnDepthDiff</td><td>If true, ranges are split on count differences and on <a class="el" href="structtvm_1_1internal_1_1RangeCounting_1_1Limit.html#a761935003df9659f922daccaa678b314af8dbc722a45a44b77f130f48efd0a440">Limit::Cut</a> (i.e. two ranges touching but not overlapping will be returned separately, not merged). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a05d848e40a72c09d639fe31343196d29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05d848e40a72c09d639fe31343196d29">&#9670;&nbsp;</a></span>remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tvm::internal::RangeCounting::remove </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtvm_1_1Range.html">Range</a> &amp;&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove a range from the counting. Return true if this changes the output of <code><a class="el" href="classtvm_1_1internal_1_1RangeCounting.html#ae978b641e3bbae6db61c9833bad26740">ranges()</a></code> (it always changes the output of <code>range(true)</code> ). </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/tvm/internal/<a class="el" href="RangeCounting_8h_source.html">RangeCounting.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetvm.html">tvm</a></li><li class="navelem"><a class="el" href="namespacetvm_1_1internal.html">internal</a></li><li class="navelem"><a class="el" href="classtvm_1_1internal_1_1RangeCounting.html">RangeCounting</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
